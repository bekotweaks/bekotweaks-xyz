
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Beko Tweaks Blog</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; background: #fff; color: #111; }
    header { padding: 20px; text-align: right; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    header input { padding: 8px 12px; border: 1px solid #ccc; border-radius: 20px; }
    main { padding: 20px 30px; max-width: 800px; margin: auto; }
    h2 { border-bottom: 2px solid deeppink; display: inline-block; padding-bottom: 4px; margin-bottom: 20px; }
    .post { display: flex; margin-bottom: 20px; gap: 20px; position: relative; }
    .post img { width: 150px; height: 100px; object-fit: cover; border-radius: 8px; background: #eee; }
    .post-content { flex: 1; }
    .post-content h3 { margin: 0 0 5px; }
    .post-content small { color: gray; }
    .delete-btn { position: absolute; top: 0; right: 0; background: red; color: white; border: none; padding: 4px 8px; border-radius: 0 0 0 5px; cursor: pointer; display: none; }
    footer { text-align: center; margin-top: 40px; color: gray; }
    form { margin: 20px 0; padding: 20px; background: #f9f9f9; border-radius: 10px; border: 1px solid #ddd; }
    form input, form textarea { width: 100%; margin-bottom: 10px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
    form button { padding: 10px 20px; background: deeppink; border: none; color: #fff; border-radius: 5px; cursor: pointer; }
  </style>
</head>
<body>

<header>
  <input type="text" id="searchInput" placeholder="Search">
</header>

<main>
  <h2>RECENT POSTS</h2>
  <form id="blogForm">
    <input type="text" id="title" placeholder="Blog Title" required>
    <textarea id="desc" placeholder="Short Description" required></textarea>
    <input type="url" id="link" placeholder="Download/Redirect Link" required>
    <input type="file" id="thumb" accept="image/*" required>
    <button type="submit">Upload Blog Post</button>
  </form>

  <div id="posts"></div>
</main>

<footer>
  Made by Beko Tweaks © 2025
</footer>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyC0ni4C6RjqhhOvaC_SM0TeKkxoRUy7Yr0",
    authDomain: "bekotweaksblog.firebaseapp.com",
    databaseURL: "https://bekotweaksblog-default-rtdb.firebaseio.com",
    projectId: "bekotweaksblog",
    storageBucket: "bekotweaksblog.firebasestorage.app",
    messagingSenderId: "575803781932",
    appId: "1:575803781932:web:bb1580c563afb9aebd3289",
    measurementId: "G-K57W25QZBM"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const postsContainer = document.getElementById('posts');
  const form = document.getElementById('blogForm');

  form.addEventListener('submit', function(e) {
    e.preventDefault();
    const title = document.getElementById('title').value;
    const desc = document.getElementById('desc').value;
    const link = document.getElementById('link').value;
    const thumbFile = document.getElementById('thumb').files[0];
    const reader = new FileReader();
    reader.onload = function(event) {
      const imgSrc = event.target.result;
      const newPostRef = db.ref('posts').push();
      newPostRef.set({
        title: title,
        desc: desc,
        link: link,
        thumb: imgSrc,
        userPostId: newPostRef.key
      });
      form.reset();
    };
    reader.readAsDataURL(thumbFile);
  });

  db.ref('posts').on('child_added', function(data) {
    const post = data.val();
    const postDiv = document.createElement('div');
    postDiv.className = 'post';
    postDiv.id = post.userPostId;
    postDiv.innerHTML = `
      <img src="${post.thumb}" alt="">
      <div class="post-content">
        <h3>${post.title}</h3>
        <small>USER · UPLOADED</small>
        <p>${post.desc}</p>
        <a href="${post.link}" target="_blank">Download Now</a>
      </div>
      <button class="delete-btn">Delete</button>
    `;
    postDiv.querySelector('.delete-btn').addEventListener('click', function() {
      db.ref('posts/' + post.userPostId).remove();
    });
    postsContainer.appendChild(postDiv);
  });

  db.ref('posts').on('child_removed', function(data) {
    const postElem = document.getElementById(data.key);
    if (postElem) postElem.remove();
  });

  document.getElementById('searchInput').addEventListener('input', function() {
    const filter = this.value.toLowerCase();
    const posts = document.querySelectorAll('.post');
    posts.forEach(post => {
      const text = post.innerText.toLowerCase();
      post.style.display = text.includes(filter) ? '' : 'none';
    });
  });
</script>

</body>
</html>
